<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SALON DE LUMIÈRE | 銀座プレミアムサロン</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300&family=Noto+Serif+JP:wght@200;300;400&display=swap" rel="stylesheet" />
  <style>
    :root {
      --gold: #c9a96e;
      --gold-light: #e8d5b0;
      --dark: #0a0a0a;
      --dark2: #141414;
      --dark3: #1e1e1e;
      --cream: #f5f0e8;
      --text: #e8e0d0;
      --text-muted: #8a8070;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html { scroll-behavior: smooth; }

    body {
      background: var(--dark);
      color: var(--text);
      font-family: 'Noto Serif JP', serif;
      overflow-x: hidden;
    }

    /* ─── HERO ─── */
    .hero {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      position: relative;
      padding: 4rem 2rem;
      background:
        radial-gradient(ellipse 80% 60% at 50% 0%, rgba(201,169,110,0.12) 0%, transparent 70%),
        linear-gradient(180deg, #0a0a0a 0%, #111 100%);
    }

    .hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background-image: repeating-linear-gradient(
        90deg, transparent, transparent 80px,
        rgba(201,169,110,0.03) 80px, rgba(201,169,110,0.03) 81px
      ),
      repeating-linear-gradient(
        0deg, transparent, transparent 80px,
        rgba(201,169,110,0.03) 80px, rgba(201,169,110,0.03) 81px
      );
      pointer-events: none;
    }

    .hero-tag {
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.75rem;
      letter-spacing: 0.4em;
      color: var(--gold);
      text-transform: uppercase;
      margin-bottom: 2rem;
      opacity: 0;
      animation: fadeUp 1s 0.3s forwards;
    }

    .hero h1 {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 300;
      font-size: clamp(3rem, 8vw, 7rem);
      line-height: 1.05;
      letter-spacing: 0.05em;
      color: var(--cream);
      opacity: 0;
      animation: fadeUp 1s 0.6s forwards;
    }

    .hero h1 em {
      font-style: italic;
      color: var(--gold);
    }

    .hero-divider {
      width: 80px;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--gold), transparent);
      margin: 2.5rem auto;
      opacity: 0;
      animation: fadeUp 1s 0.9s forwards;
    }

    .hero-sub {
      font-weight: 200;
      font-size: 0.95rem;
      letter-spacing: 0.15em;
      color: var(--text-muted);
      line-height: 2;
      opacity: 0;
      animation: fadeUp 1s 1.1s forwards;
    }

    .hero-cta {
      margin-top: 3rem;
      opacity: 0;
      animation: fadeUp 1s 1.4s forwards;
    }

    .btn-gold {
      display: inline-block;
      padding: 1rem 3rem;
      border: 1px solid var(--gold);
      color: var(--gold);
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.85rem;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      text-decoration: none;
      cursor: pointer;
      background: transparent;
      transition: all 0.4s;
      position: relative;
      overflow: hidden;
    }

    .btn-gold::before {
      content: '';
      position: absolute;
      inset: 0;
      background: var(--gold);
      transform: translateX(-100%);
      transition: transform 0.4s;
    }

    .btn-gold:hover { color: var(--dark); }
    .btn-gold:hover::before { transform: translateX(0); }
    .btn-gold span { position: relative; z-index: 1; }

    /* ─── SECTIONS ─── */
    section { padding: 6rem 2rem; }

    .section-label {
      font-family: 'Cormorant Garamond', serif;
      font-size: 0.7rem;
      letter-spacing: 0.5em;
      color: var(--gold);
      text-transform: uppercase;
      margin-bottom: 1rem;
    }

    .section-title {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 300;
      font-size: clamp(2rem, 4vw, 3.5rem);
      color: var(--cream);
      margin-bottom: 1.5rem;
    }

    .section-body {
      color: var(--text-muted);
      font-size: 0.9rem;
      line-height: 2.2;
      font-weight: 200;
      max-width: 480px;
    }

    /* ─── ABOUT ─── */
    .about {
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 5rem;
      align-items: center;
    }

    .about-visual {
      aspect-ratio: 3/4;
      background: var(--dark2);
      border: 1px solid rgba(201,169,110,0.15);
      position: relative;
      overflow: hidden;
    }

    .about-visual::after {
      content: '';
      position: absolute;
      inset: 20px;
      border: 1px solid rgba(201,169,110,0.08);
    }

    .about-visual-inner {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Cormorant Garamond', serif;
      font-size: 5rem;
      color: rgba(201,169,110,0.1);
      font-style: italic;
    }

    /* ─── MENU ─── */
    .menu-section { background: var(--dark2); }
    .menu-grid {
      max-width: 1000px;
      margin: 3rem auto 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5px;
      background: rgba(201,169,110,0.1);
    }

    .menu-card {
      background: var(--dark2);
      padding: 2.5rem;
      transition: background 0.3s;
    }

    .menu-card:hover { background: var(--dark3); }

    .menu-card-name {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.3rem;
      color: var(--cream);
      margin-bottom: 0.5rem;
    }

    .menu-card-price {
      font-family: 'Cormorant Garamond', serif;
      color: var(--gold);
      font-size: 1rem;
      letter-spacing: 0.1em;
      margin-bottom: 1rem;
    }

    .menu-card-desc {
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.9;
      font-weight: 200;
    }

    /* ─── CHAT BUBBLE ─── */
    #chat-bubble {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 64px;
      height: 64px;
      background: linear-gradient(135deg, var(--gold), #a07840);
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 32px rgba(201,169,110,0.4);
      z-index: 1000;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    #chat-bubble:hover {
      transform: scale(1.08);
      box-shadow: 0 12px 40px rgba(201,169,110,0.6);
    }

    #chat-bubble svg { width: 26px; height: 26px; fill: var(--dark); }

    .chat-pulse {
      position: absolute;
      inset: -4px;
      border-radius: 50%;
      border: 2px solid var(--gold);
      animation: pulse 2s infinite;
    }

    /* ─── CHAT WINDOW ─── */
    #chat-window {
      position: fixed;
      bottom: 7rem;
      right: 2rem;
      width: min(420px, calc(100vw - 2rem));
      height: 580px;
      background: var(--dark2);
      border: 1px solid rgba(201,169,110,0.25);
      border-radius: 2px;
      display: flex;
      flex-direction: column;
      z-index: 999;
      box-shadow: 0 24px 80px rgba(0,0,0,0.7);
      transform: translateY(20px) scale(0.95);
      opacity: 0;
      pointer-events: none;
      transition: all 0.35s cubic-bezier(0.23, 1, 0.32, 1);
    }

    #chat-window.open {
      transform: translateY(0) scale(1);
      opacity: 1;
      pointer-events: all;
    }

    .chat-header {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid rgba(201,169,110,0.15);
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .chat-avatar {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--gold), #a07840);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Cormorant Garamond', serif;
      font-style: italic;
      color: var(--dark);
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .chat-header-info { flex: 1; }
    .chat-header-name {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1rem;
      color: var(--cream);
    }
    .chat-header-status {
      font-size: 0.7rem;
      color: var(--gold);
      letter-spacing: 0.1em;
    }

    .chat-close {
      cursor: pointer;
      color: var(--text-muted);
      font-size: 1.2rem;
      line-height: 1;
      transition: color 0.2s;
    }
    .chat-close:hover { color: var(--cream); }

    .chat-messages {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      scrollbar-width: thin;
      scrollbar-color: rgba(201,169,110,0.2) transparent;
    }

    .msg {
      max-width: 85%;
      font-size: 0.85rem;
      line-height: 1.7;
    }

    .msg-ai {
      align-self: flex-start;
      background: var(--dark3);
      border: 1px solid rgba(201,169,110,0.12);
      padding: 0.9rem 1.1rem;
      border-radius: 0 8px 8px 8px;
      color: var(--text);
    }

    .msg-user {
      align-self: flex-end;
      background: linear-gradient(135deg, rgba(201,169,110,0.2), rgba(201,169,110,0.1));
      border: 1px solid rgba(201,169,110,0.25);
      padding: 0.9rem 1.1rem;
      border-radius: 8px 0 8px 8px;
      color: var(--cream);
    }

    .msg-time {
      font-size: 0.65rem;
      color: var(--text-muted);
      margin-top: 0.3rem;
    }

    .msg-ai .msg-time { text-align: left; }
    .msg-user .msg-time { text-align: right; }

    .typing-indicator {
      display: flex;
      gap: 4px;
      padding: 0.9rem 1.1rem;
      background: var(--dark3);
      border: 1px solid rgba(201,169,110,0.12);
      border-radius: 0 8px 8px 8px;
      align-self: flex-start;
      width: fit-content;
    }

    .typing-indicator span {
      width: 6px;
      height: 6px;
      background: var(--gold);
      border-radius: 50%;
      animation: typing 1.2s infinite;
    }
    .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
    .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

    .chat-input-area {
      padding: 1rem 1.25rem;
      border-top: 1px solid rgba(201,169,110,0.15);
      display: flex;
      gap: 0.75rem;
      align-items: flex-end;
    }

    #chat-input {
      flex: 1;
      background: var(--dark3);
      border: 1px solid rgba(201,169,110,0.15);
      border-radius: 4px;
      padding: 0.75rem 1rem;
      color: var(--text);
      font-family: 'Noto Serif JP', serif;
      font-size: 0.85rem;
      resize: none;
      min-height: 44px;
      max-height: 120px;
      outline: none;
      transition: border-color 0.2s;
    }

    #chat-input:focus { border-color: rgba(201,169,110,0.4); }
    #chat-input::placeholder { color: var(--text-muted); font-size: 0.8rem; }

    #send-btn {
      width: 44px;
      height: 44px;
      background: var(--gold);
      border: none;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
      flex-shrink: 0;
    }
    #send-btn:hover { background: var(--gold-light); }
    #send-btn:disabled { opacity: 0.4; cursor: not-allowed; }
    #send-btn svg { width: 18px; height: 18px; fill: var(--dark); }

    /* ─── FOOTER ─── */
    footer {
      text-align: center;
      padding: 4rem 2rem;
      border-top: 1px solid rgba(201,169,110,0.1);
      color: var(--text-muted);
      font-size: 0.75rem;
      letter-spacing: 0.2em;
    }

    footer .footer-logo {
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.8rem;
      color: var(--gold);
      font-style: italic;
      margin-bottom: 1rem;
    }

    /* ─── ANIMATIONS ─── */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.6; }
      50%       { transform: scale(1.3); opacity: 0; }
    }

    @keyframes typing {
      0%, 60%, 100% { transform: translateY(0); }
      30%            { transform: translateY(-6px); }
    }

    /* ─── RESPONSIVE ─── */
    @media (max-width: 768px) {
      .about { grid-template-columns: 1fr; gap: 3rem; }
      .about-visual { aspect-ratio: 4/3; }
    }
  </style>
</head>
<body>

<!-- ══════════ HERO ══════════ -->
<section class="hero">
  <p class="hero-tag">Ginza · Tokyo · Since 2010</p>
  <h1>Salon de<br /><em>Lumière</em></h1>
  <div class="hero-divider"></div>
  <p class="hero-sub">
    光の中で、あなたの美しさを引き出す。<br />
    銀座プレミアムヘアサロン
  </p>
  <div class="hero-cta">
    <button class="btn-gold" onclick="openChat()"><span>AI接客で予約する</span></button>
  </div>
</section>

<!-- ══════════ ABOUT ══════════ -->
<section>
  <div class="about">
    <div class="about-visual">
      <div class="about-visual-inner">L</div>
    </div>
    <div>
      <p class="section-label">Our Philosophy</p>
      <h2 class="section-title">美しさへの<br />真摯な姿勢</h2>
      <p class="section-body">
        一人ひとりの髪質・骨格・ライフスタイルを丁寧に読み解き、その方だけに合ったスタイルをご提案します。使用するプロダクトはすべて厳選されたオーガニック処方。施術後も続く輝きを約束します。
      </p>
    </div>
  </div>
</section>

<!-- ══════════ MENU ══════════ -->
<section class="menu-section">
  <div style="max-width:1000px;margin:0 auto;">
    <p class="section-label">Menu & Price</p>
    <h2 class="section-title">施術メニュー</h2>
    <div class="menu-grid">
      <div class="menu-card">
        <p class="menu-card-name">Cut &amp; Style</p>
        <p class="menu-card-price">¥ 8,800 〜</p>
        <p class="menu-card-desc">骨格診断に基づく似合わせカット。シャンプー・ブロー込み。</p>
      </div>
      <div class="menu-card">
        <p class="menu-card-name">Color</p>
        <p class="menu-card-price">¥ 15,400 〜</p>
        <p class="menu-card-desc">フルカラー / グラデーション / ハイライト。全てトリートメント込み。</p>
      </div>
      <div class="menu-card">
        <p class="menu-card-name">Treatment</p>
        <p class="menu-card-price">¥ 6,600 〜</p>
        <p class="menu-card-desc">酸熱 / 水素 / 生プラセンタ。髪の内側から補修します。</p>
      </div>
      <div class="menu-card">
        <p class="menu-card-name">Perm &amp; Straight</p>
        <p class="menu-card-price">¥ 22,000 〜</p>
        <p class="menu-card-desc">縮毛矯正・デジタルパーマ。傷みを最小限に抑えたやわらか仕上げ。</p>
      </div>
    </div>
  </div>
</section>

<!-- ══════════ FOOTER ══════════ -->
<footer>
  <div class="footer-logo">Lumière</div>
  <p>〒104-0061 東京都中央区銀座 X-XX-XX ビル 5F</p>
  <p style="margin-top:0.5rem;">TEL 03-XXXX-XXXX｜営業時間 10:00–20:00｜定休日 火曜</p>
  <p style="margin-top:1.5rem; font-size:0.65rem; opacity:0.4;">© 2025 Salon de Lumière. All rights reserved.</p>
</footer>

<!-- ══════════ CHAT BUBBLE ══════════ -->
<div id="chat-bubble" onclick="openChat()">
  <div class="chat-pulse"></div>
  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 10H6v-2h12v2zm0-3H6V7h12v2z"/>
  </svg>
</div>

<!-- ══════════ CHAT WINDOW ══════════ -->
<div id="chat-window">
  <div class="chat-header">
    <div class="chat-avatar">L</div>
    <div class="chat-header-info">
      <div class="chat-header-name">Lumière AI アシスタント</div>
      <div class="chat-header-status">● オンライン</div>
    </div>
    <div class="chat-close" onclick="closeChat()">✕</div>
  </div>
  <div class="chat-messages" id="chat-messages"></div>
  <div class="chat-input-area">
    <textarea id="chat-input" placeholder="ご質問・ご予約内容をどうぞ…" rows="1"></textarea>
    <button id="send-btn" onclick="sendMessage()">
      <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
    </button>
  </div>
</div>

<script>
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
// ★★★ ここを書き換えてください ★★★
// GASをデプロイした後に発行される「ウェブアプリURL」を貼り付けてください
const GAS_PROXY_URL = "https://script.google.com/macros/s/AKfycbzliFd2z6C7JI6wr3o0GQ_Y-JxhwjhqiuKbg8o79LLVno8U8UFWKMc2_wpv558unW0t/exec";
// ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

let chatHistory = [];
let isOpen = false;
let initialized = false;

function openChat() {
  isOpen = true;
  document.getElementById('chat-window').classList.add('open');
  if (!initialized) {
    initialized = true;
    addAIMessage("こんにちは！Salon de LumièreのAIアシスタントです✨\nご予約・メニュー・料金など、何でもお気軽にお聞きください。");
  }
}

function closeChat() {
  isOpen = false;
  document.getElementById('chat-window').classList.remove('open');
}

function now() {
  return new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
}

function addAIMessage(text) {
  const box = document.getElementById('chat-messages');
  const div = document.createElement('div');
  div.className = 'msg msg-ai';
  div.innerHTML = `<div>${text.replace(/\n/g,'<br>')}</div><div class="msg-time">${now()}</div>`;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
}

function addUserMessage(text) {
  const box = document.getElementById('chat-messages');
  const div = document.createElement('div');
  div.className = 'msg msg-user';
  div.innerHTML = `<div>${text.replace(/\n/g,'<br>')}</div><div class="msg-time">${now()}</div>`;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
}

function showTyping() {
  const box = document.getElementById('chat-messages');
  const el = document.createElement('div');
  el.className = 'typing-indicator';
  el.id = 'typing';
  el.innerHTML = '<span></span><span></span><span></span>';
  box.appendChild(el);
  box.scrollTop = box.scrollHeight;
}

function hideTyping() {
  const el = document.getElementById('typing');
  if (el) el.remove();
}

async function sendMessage() {
  const input = document.getElementById('chat-input');
  const btn = document.getElementById('send-btn');
  const text = input.value.trim();
  if (!text || btn.disabled) return;

  input.value = '';
  input.style.height = 'auto';
  addUserMessage(text);
  chatHistory.push({ role: 'user', parts: [{ text }] });

  btn.disabled = true;
  showTyping();

  try {
    const formData = new FormData();
    formData.append('history', JSON.stringify(chatHistory));
    const res = await fetch(GAS_PROXY_URL, {
      method: 'POST',
      body: formData
    });
    const data = await res.json();
    hideTyping();

    const reply = data.reply || "申し訳ございません。少し時間をおいて再度お試しください。";
    addAIMessage(reply);
    chatHistory.push({ role: 'model', parts: [{ text: reply }] });

    // 予約完了キーワード検出
    if (reply.includes('予約が完了') || reply.includes('ご予約を承りました')) {
      // サーバー側で自動通知済み
    }
  } catch (e) {
    hideTyping();
    addAIMessage("通信エラーが発生しました。しばらくしてからお試しください。");
  }

  btn.disabled = false;
}

// Enterキー送信（Shift+Enterで改行）
document.getElementById('chat-input').addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

// テキストエリア自動拡張
document.getElementById('chat-input').addEventListener('input', function() {
  this.style.height = 'auto';
  this.style.height = Math.min(this.scrollHeight, 120) + 'px';
});
</script>
</body>
</html>
